# MetaExtract Production Deployment Configuration
# WARNING: This file contains sensitive configuration
# Do NOT commit actual values to version control
# Use environment variables or a secrets manager in production

# Application Settings
APP_NAME=metaextract
APP_VERSION=4.0.0
NODE_ENV=production
HOST=0.0.0.0
PORT=3000

# =============================================================================
# CRITICAL SECURITY CONFIGURATION
# =============================================================================
# These MUST be set before deployment - the application will fail to start
# without them in production mode

# Generate secrets with: openssl rand -hex 32
JWT_SECRET=  # REQUIRED: Set via environment variable or secrets manager
TOKEN_SECRET=  # REQUIRED: For client quota token signing
ADMIN_API_KEY=  # REQUIRED: For admin API access
CSRF_SECRET=  # REQUIRED: For CSRF token signing

# =============================================================================
# Database Configuration
# =============================================================================
DATABASE_URL=postgresql://user:password@host:5432/metaextract
STORAGE_REQUIRE_DATABASE=true
DB_SSL_MODE=require
DB_POOL_SIZE=25
DB_STATEMENT_TIMEOUT=30000

# =============================================================================
# Redis Configuration (for caching and session storage)
# =============================================================================
REDIS_URL=redis://localhost:6379
REDIS_TLS_URL=

# =============================================================================
# File Upload Limits
# =============================================================================
MAX_FILE_SIZE=2000000000  # 2GB in bytes
UPLOAD_DIR=/tmp/metaextract_uploads
TEMP_DIR=/tmp

# =============================================================================
# Rate Limiting Configuration
# =============================================================================
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX=100  # requests per window

# =============================================================================
# API Keys and External Services
# =============================================================================
DODO_PAYMENTS_API_KEY=  # Set via environment variable
DODO_WEBHOOK_SECRET=  # Set via environment variable
DODO_ENV=live

# =============================================================================
# Feature Flags
# =============================================================================
ENABLE_MONITORING=true
ENABLE_ALERTING=true
ENABLE_ANALYTICS=true
ENABLE_CACHING=true
ENABLE_SECURITY=true
ENABLE_BATCH_PROCESSING=true

# =============================================================================
# Security Configuration
# =============================================================================
SECURITY_LEVEL=strict  # basic, standard, strict, paranoid
SECURITY_MAX_FILE_SIZE=52428800  # 50MB in bytes for strict mode

# Blocked file extensions (dangerous file types)
SECURITY_DANGEROUS_EXTENSIONS=.exe,.scr,.bat,.cmd,.com,.pif,.lnk,.inf,.reg,.vbs,.vbe,.js,.jse,.wsf,.wsh,.msi,.msp,.hta,.cpl,.ocx,.dll,.sys,.bin,.elf

# =============================================================================
# Performance Settings
# =============================================================================
MAX_WORKERS=4
BATCH_CHUNK_SIZE=10
CACHE_MAX_SIZE=1000
CACHE_TTL=3600  # 1 hour

# =============================================================================
# Logging Configuration
# =============================================================================
LOG_LEVEL=info
LOG_FORMAT=json
LOG_PRETTY_PRINT=false

# =============================================================================
# External Dependencies
# =============================================================================
FFMPEG_PATH=/usr/bin/ffmpeg
EXIFTOOL_PATH=/usr/bin/exiftool

# =============================================================================
# Email Configuration (for alerts)
# =============================================================================
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=  # Set via environment variable
EMAIL_FROM=noreply@metaextract.com

# =============================================================================
# AWS S3 Configuration (for file storage)
# =============================================================================
AWS_ACCESS_KEY_ID=  # Set via environment variable
AWS_SECRET_ACCESS_KEY=  # Set via environment variable
AWS_REGION=us-east-1
S3_BUCKET_NAME=

# =============================================================================
# Monitoring and Alerting
# =============================================================================
MONITORING_INTERVAL=60  # seconds
ALERT_HIGH_ERROR_THRESHOLD=0.1  # 10% error rate
ALERT_SLOW_PROCESSING_THRESHOLD=5000  # 5 seconds
ALERT_LOW_THROUGHPUT_THRESHOLD=1  # 1 request per minute

# =============================================================================
# Analytics Configuration
# =============================================================================
ANALYTICS_RETENTION_DAYS=30
ANALYTICS_SAMPLE_RATE=1.0  # 100% sampling
