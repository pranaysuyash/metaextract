{
  "timestamp": "2026-01-06T16:04:33.923735",
  "applied_migrations": [],
  "test_results": {
    "query_times_ms": [
      0.406,
      0.532
    ],
    "total_tests": 2,
    "raw_output": "                                                                     QUERY PLAN                                                                      \n-----------------------------------------------------------------------------------------------------------------------------------------------------\n Limit  (cost=59.99..60.02 rows=10 width=44) (actual time=0.173..0.175 rows=0 loops=1)\n   Buffers: shared hit=6 dirtied=1\n   ->  Sort  (cost=59.99..60.28 rows=117 width=44) (actual time=0.172..0.173 rows=0 loops=1)\n         Sort Key: (count(ct.id)) DESC\n         Sort Method: quicksort  Memory: 25kB\n         Buffers: shared hit=6 dirtied=1\n         ->  HashAggregate  (cost=56.29..57.46 rows=117 width=44) (actual time=0.114..0.115 rows=0 loops=1)\n               Group Key: u.email, cb.credits\n               Batches: 1  Memory Usage: 40kB\n               Buffers: shared hit=3 dirtied=1\n               ->  Hash Join  (cost=38.67..55.41 rows=117 width=68) (actual time=0.112..0.113 rows=0 loops=1)\n                     Hash Cond: ((cb.user_id)::text = (u.id)::text)\n                     Buffers: shared hit=3 dirtied=1\n                     ->  Hash Join  (cost=22.60..39.03 rows=117 width=68) (actual time=0.058..0.059 rows=1 loops=1)\n                           Hash Cond: ((ct.balance_id)::text = (cb.id)::text)\n                           Buffers: shared hit=2 dirtied=1\n                           ->  Seq Scan on credit_transactions ct  (cost=0.00..16.12 rows=117 width=64) (actual time=0.032..0.032 rows=1 loops=1)\n                                 Filter: (created_at > (now() - '7 days'::interval))\n                                 Buffers: shared hit=1 dirtied=1\n                           ->  Hash  (cost=15.60..15.60 rows=560 width=68) (actual time=0.015..0.016 rows=13 loops=1)\n                                 Buckets: 1024  Batches: 1  Memory Usage: 10kB\n                                 Buffers: shared hit=1\n                                 ->  Seq Scan on credit_balances cb  (cost=0.00..15.60 rows=560 width=68) (actual time=0.009..0.010 rows=13 loops=1)\n                                       Buffers: shared hit=1\n                     ->  Hash  (cost=12.70..12.70 rows=270 width=64) (actual time=0.041..0.042 rows=8 loops=1)\n                           Buckets: 1024  Batches: 1  Memory Usage: 9kB\n                           Buffers: shared hit=1\n                           ->  Seq Scan on users u  (cost=0.00..12.70 rows=270 width=64) (actual time=0.021..0.022 rows=8 loops=1)\n                                 Buffers: shared hit=1\n Planning:\n   Buffers: shared hit=218\n Planning Time: 3.815 ms\n Execution Time: 0.406 ms\n(33 rows)\n\n                                                                          QUERY PLAN                                                                          \n--------------------------------------------------------------------------------------------------------------------------------------------------------------\n Incremental Sort  (cost=27.45..27.49 rows=2 width=50) (actual time=0.365..0.366 rows=29 loops=1)\n   Sort Key: (date_trunc('hour'::text, created_at)) DESC, (count(*)) DESC\n   Presorted Key: (date_trunc('hour'::text, created_at))\n   Full-sort Groups: 1  Sort Method: quicksort  Average Memory: 27kB  Peak Memory: 27kB\n   Buffers: shared hit=29 dirtied=10\n   ->  GroupAggregate  (cost=27.41..27.44 rows=1 width=50) (actual time=0.324..0.343 rows=29 loops=1)\n         Group Key: (date_trunc('hour'::text, created_at)), product, event_name\n         Buffers: shared hit=26 dirtied=10\n         ->  Sort  (cost=27.41..27.41 rows=1 width=66) (actual time=0.317..0.321 rows=59 loops=1)\n               Sort Key: (date_trunc('hour'::text, created_at)) DESC, product, event_name, user_id\n               Sort Method: quicksort  Memory: 28kB\n               Buffers: shared hit=26 dirtied=10\n               ->  Index Scan using idx_ui_events_product_created on ui_events  (cost=0.28..27.40 rows=1 width=66) (actual time=0.041..0.274 rows=59 loops=1)\n                     Index Cond: (created_at > (now() - '24:00:00'::interval))\n                     Buffers: shared hit=23 dirtied=10\n Planning:\n   Buffers: shared hit=98\n Planning Time: 2.180 ms\n Execution Time: 0.532 ms\n(19 rows)\n\n"
  },
  "summary": {
    "migrations_applied": 0,
    "total_new_indexes": 39,
    "query_tests_run": 2
  }
}